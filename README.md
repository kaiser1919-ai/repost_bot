# Агрегатор постов из Telegram-каналов про изготовление сидра

## Описание

Этот проект представляет собой автоматизированный бот, размещённый на VPS-сервере, задачей которого является регулярный сбор и репост новых публикаций из списка заранее заданных Telegram-каналов, посвящённых изготовлению сидра, на центральный агрегирующий канал — **[CiderPulsRu](https://t.me/CiderPulsRu)**.

Бот **воссоздаёт точные копии** оригинальных постов, включая текст, медиа (фото, видео, документы), форматирование (жирный, курсив, ссылки), эмодзи, а также **указывает источник** в виде кликабельной ссылки на оригинал. Это позволяет пользователям получать актуальную информацию из множества каналов в одном месте, не потеряв авторства.

## Функционал

- **Регулярный обход каналов**: бот автоматически и с плавающим интервалом (например, от 2 до 10 минут) проверяет список каналов, указанных в файле `channels.csv`.
- **Парсинг постов**: бот отслеживает как **новые посты**, так и **изменения** в уже опубликованных (если редактируются).
- **Воссоздание постов**: на агрегирующем канале `@CiderPulsRu` создаются **идентичные копии** оригинальных постов, включая:
  - Текст (с сохранением форматирования, эмодзи и встроенных ссылок).
  - Медиафайлы (фото, видео, документы, альбомы).
  - Репосты (воссоздаются как публикации с сохранением оригинальной структуры).
- **Указание источника**: в конце каждого репоста добавляется кликабельная строка **"Источник"**, ведущая на оригинал поста в донорском канале. Ссылка формируется как `MessageEntityTextUrl`, чтобы не разворачивался предпросмотр.
- **24/7 работа**: бот запущен на VPS-сервере и работает постоянно, обеспечивая своевременное обновление информации.
- **Адаптация к "человеческому" поведению**: для снижения риска ограничений от Telegram, включены случайные задержки между действиями и проверками.

## Используемые технологии и инструменты

- **[Qwen3-Coder]([https://chat.qwen.ai])** — использовался для **генерации и оптимизации Python-кода**, включая сложную логику обработки `entities`, альбомов и репостов.
- **[Telethon](https://docs.telethon.dev/)** — основная библиотека для взаимодействия с **Telegram API** как пользовательский клиент. Позволяет читать и отправлять сообщения, включая использование `formatting_entities` для корректного отображения форматирования и ссылок.
- **Python 3.12** — основной язык программирования.
- **CSV** — формат файла для хранения списка каналов-доноров.
- **VPS-сервер** — для постоянного запуска бота.

## Архитектура

- `repost_bot.py` — основной исполняемый файл с логикой бота.
- `config.py` — настройки (токены, ID каналов, API-ключи, режим тестирования).
- `channels.csv` — список Telegram-каналов для мониторинга.
- `last_seen_posts.json` / `synced_posts.json` — файлы для отслеживания уже обработанных и синхронизированных постов.
- `logs.log` — логи работы бота.

## Преимущества

- **Централизованная информация**: вся информация из узкоспециализированных каналов в одном месте.
- **Сохранение авторства**: каждый пост содержит ссылку на источник.
- **Автоматизация**: минимальное вмешательство пользователя, бот работает автономно.
- **Надёжность и точность**: воссоздание постов с высокой степенью соответствия оригиналу.

## Примечания

- Бот работает под учётной записью **пользователя Telegram** (не бот-токен), что позволяет ему обходить некоторые ограничения Bot API.
- Важно соблюдать лимиты Telegram API, чтобы избежать блокировок.
- Проект может быть адаптирован под другие тематики каналов.
